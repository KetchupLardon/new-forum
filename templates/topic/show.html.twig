{% extends 'base.html.twig' %}

{% block title %}Topic{% endblock %}

{% block body %}
    <h1>Topic</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ topic.id }}</td>
            </tr>
            <tr>
                <th>Title</th>
                <td>{{ topic.title }}</td>
            </tr>
            <tr>
                <th>Content</th>
                <td>{{ topic.content }}</td>
            </tr>
            <tr>
                <th>CreatedAt</th>
                <td>{{ topic.createdAt ? topic.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>UpdatedAt</th>
                <td>{{ topic.updatedAt ? topic.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('topic_index') }}">back to list</a>

    {% if is_granted('IS_AUTHENTICATED_FULLY') %}<a href="{{ path('topic_edit', {'id': topic.id}) }}">edit</a>{% endif %}
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}{{ include('topic/_delete_form.html.twig') }}{% endif %}

    <p>Commentaires</p>

    
        {% for comment in comments %}
            <div>
            <div>{{comment.content}}</div>
            <div class="row">
                <div>{{ comment.getUser().getFirstName() }}</div>
                <div>{{ comment.getUser().getLastName() }}</div>
                {% if comment.updatedAt %}
                    <div>Modifié le {{ comment.updatedAt|date('Y-m-d H:i:s') }}</div>
                {% else %}
                    <div>Créé le{{ comment.createdAt|date('Y-m-d H:i:s') }}</div>
                {% endif %}
            </div>
                <div>
                    <a href="{{ path('comment_edit', {'id': comment.id}) }}">edit</a>
                    {{ include('comment/_delete_form.html.twig') }}
                </div>
            </div>
        {% else %}
            <tr>
                <div colspan="5">no records found</div>
            </tr>
        {% endfor %}

    {{ form_start(form) }}
    {{ form_widget(form) }}
    <button class="btn">{{ button_label|default('Save') }}</button>
    {{ form_end(form) }}
{% endblock %}
